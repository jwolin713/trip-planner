generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Destination {
  id                       String           @id @default(cuid())
  name                     String
  type                     String

  imageUrl                 String?
  propertyUrl              String?
  notes                    String?

  airportCode              String?
  distanceFromAirportMiles Float?
  driveTimeFromAirportMin  Int?

  avgHighTempF             Float?
  avgLowTempF              Float?
  weatherSummary           String?

  priceRange               PriceRange?

  distanceFromHoustonMiles Float?
  flightDurationHours      Float?

  distanceFromBostonMiles  Float?
  flightDurationFromBostonHours Float?

  bedrooms                 Int?
  bathrooms                Int?

  votes                    Vote[]
  comments                 Comment[]

  createdAt                DateTime         @default(now())
  updatedAt                DateTime         @updatedAt
}

model Vote {
  id            String      @id @default(cuid())
  destinationId String
  destination   Destination @relation(fields: [destinationId], references: [id], onDelete: Cascade)
  voterId       String      // Browser session ID or user identifier
  createdAt     DateTime    @default(now())

  @@unique([destinationId, voterId])
  @@index([destinationId])
}

model Comment {
  id            String      @id @default(cuid())
  destinationId String
  destination   Destination @relation(fields: [destinationId], references: [id], onDelete: Cascade)
  content       String
  authorName    String
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@index([destinationId])
}

enum PriceRange {
  BUDGET
  MODERATE
  EXPENSIVE
  LUXURY
}
